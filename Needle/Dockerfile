# A basic ubuntu box with MWR's NEEDLE Pre-Installed
# Build and run with:
	#docker build -t needle {fullpath}/Needle
	#docker run -i -t needle

FROM ubuntu:14.04

MAINTAINER Daniel Reece version: 0.1

# Unix packages & Python packages
RUN apt-get update -y
RUN apt-get install -y git wget
RUN apt-get install -y python2.7 python2.7-dev python-pip sshpass sqlite3 lib32ncurses5-dev
RUN apt-get install -y python-setuptools python-dev ncurses-dev
RUN apt-get install -y libffi-dev g++ libssl-dev
RUN pip install readline paramiko sshtunnel frida biplist

# mitmproxy
RUN wget https://github.com/mitmproxy/mitmproxy/releases/download/v0.18.1/mitmproxy-0.18.1-linux.tar.gz
RUN tar -xvzf mitmproxy-0.18.1-linux.tar.gz
RUN cp mitm* /usr/local/bin/

RUN git clone https://github.com/mwrlabs/needle.git

# TestOK
CMD python needle/needle/needle.py
